<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Melbourne Branch End of Year Celebration</title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="Navigate the Melbourne Branch End of Year Celebration on Lady Cutler cruise">
    <meta name="theme-color" content="#1e3a5f">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="EoY Party">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- PWA Manifest & Icons -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="icons/icon.svg">
    <link rel="apple-touch-icon" href="icons/icon.svg">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --primary: #1e3a5f;
            --primary-light: #2d5a8a;
            --accent: #d4af37;
            --accent-light: #f4e4ba;
            --success: #34C759;
            --warning: #FF9500;
            --danger: #FF3B30;
            --bg-primary: #F2F2F7;
            --bg-secondary: #FFFFFF;
            --text-primary: #000000;
            --text-secondary: #6B7280;
            --border: #E5E7EB;
            --shadow: rgba(0, 0, 0, 0.08);
            --glass-bg: rgba(255, 255, 255, 0.85);
            --glass-border: rgba(255, 255, 255, 0.18);
            --card-bg: #FFFFFF;
        }

        [data-theme="dark"] {
            --primary: #3b82f6;
            --primary-light: #60a5fa;
            --accent: #fbbf24;
            --accent-light: #fde68a;
            --bg-primary: #111827;
            --bg-secondary: #1f2937;
            --text-primary: #F9FAFB;
            --text-secondary: #9CA3AF;
            --border: #374151;
            --shadow: rgba(0, 0, 0, 0.3);
            --glass-bg: rgba(31, 41, 55, 0.9);
            --glass-border: rgba(255, 255, 255, 0.1);
            --card-bg: #1f2937;
        }

        body.mode-en .lang-zh { display: none !important; }
        body.mode-zh .lang-en { display: none !important; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Helvetica Neue", Arial, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
            padding-bottom: env(safe-area-inset-bottom);
            transition: background 0.3s ease, color 0.3s ease;
        }

        .app-container {
            max-width: 480px;
            margin: 0 auto;
            background: var(--bg-primary);
            min-height: 100vh;
            position: relative;
            padding-bottom: calc(80px + env(safe-area-inset-bottom));
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #1e3a5f 0%, #2d5a8a 100%);
            color: white;
            padding: max(env(safe-area-inset-top), 16px) 16px 24px;
            text-align: center;
            position: relative;
        }

        [data-theme="dark"] .header {
            background: linear-gradient(135deg, #1e3a5f 0%, #0f172a 100%);
        }

        .header-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 6px 12px;
            border-radius: 20px;
            color: white;
            font-size: 12px;
            font-weight: 600;
            backdrop-filter: blur(5px);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .control-btn:active {
            transform: scale(0.95);
        }

        .header h1 {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
            line-height: 1.3;
        }

        .header .subtitle {
            font-size: 13px;
            opacity: 0.9;
            font-weight: 500;
        }

        /* Content */
        .content {
            padding: 16px;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cards */
        .card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: 0 2px 8px var(--shadow);
            transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.3s ease;
            border: 1px solid var(--border);
        }

        .card:active {
            transform: scale(0.98);
        }

        .card-title {
            font-size: 15px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .card-content {
            font-size: 14px;
            line-height: 1.6;
            color: var(--text-secondary);
        }

        /* Section Title */
        .section-title {
            font-size: 17px;
            font-weight: 700;
            margin-bottom: 12px;
            padding-left: 12px;
            border-left: 4px solid var(--accent);
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Alert Box */
        .alert-box {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border-left: 4px solid var(--warning);
            padding: 12px;
            border-radius: 12px;
            margin-bottom: 16px;
        }

        [data-theme="dark"] .alert-box {
            background: linear-gradient(135deg, #78350f, #92400e);
        }

        .alert-box.danger {
            background: linear-gradient(135deg, #fee2e2, #fecaca);
            border-left-color: var(--danger);
        }

        [data-theme="dark"] .alert-box.danger {
            background: linear-gradient(135deg, #7f1d1d, #991b1b);
        }

        /* Countdown */
        .countdown-container {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 2px 12px var(--shadow);
            border: 1px solid var(--border);
        }

        .countdown-label {
            text-align: center;
            font-size: 13px;
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .countdown-grid {
            display: flex;
            justify-content: center;
            gap: 8px;
        }

        .countdown-item {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            border-radius: 12px;
            padding: 12px 8px;
            min-width: 60px;
            text-align: center;
        }

        .countdown-number {
            font-size: 28px;
            font-weight: 700;
            color: white;
        }

        .countdown-unit {
            font-size: 10px;
            color: rgba(255,255,255,0.8);
            margin-top: 2px;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding-left: 40px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(to bottom, var(--accent), var(--primary));
            border-radius: 2px;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 16px;
        }

        .timeline-dot {
            position: absolute;
            left: -32px;
            width: 34px;
            height: 34px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            box-shadow: 0 2px 8px var(--shadow);
            border: 3px solid var(--bg-primary);
        }

        .timeline-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 12px;
            border: 1px solid var(--border);
        }

        .timeline-time {
            font-weight: 700;
            font-size: 14px;
            color: var(--primary);
        }

        [data-theme="dark"] .timeline-time {
            color: var(--accent);
        }

        .timeline-desc {
            font-size: 13px;
            color: var(--text-secondary);
            margin-top: 2px;
        }

        /* Highlight Cards */
        .highlight-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            border: 1px solid var(--border);
            box-shadow: 0 2px 8px var(--shadow);
        }

        .highlight-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
        }

        .highlight-info h3 {
            font-size: 15px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .highlight-info p {
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* Checklist */
        .checklist-item {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 14px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            border: 1px solid var(--border);
            transition: all 0.2s ease;
        }

        .checklist-item:active {
            transform: scale(0.98);
        }

        .checklist-item.checked {
            background: rgba(52, 199, 89, 0.1);
            border-color: var(--success);
        }

        .checklist-checkbox {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: all 0.2s ease;
        }

        .checklist-item.checked .checklist-checkbox {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .checklist-icon {
            font-size: 20px;
        }

        .checklist-text {
            flex: 1;
            font-size: 14px;
            color: var(--text-primary);
        }

        .checklist-item.checked .checklist-text {
            text-decoration: line-through;
            color: var(--text-secondary);
        }

        /* FAQ */
        .faq-item {
            background: var(--card-bg);
            border-radius: 12px;
            margin-bottom: 8px;
            overflow: hidden;
            border: 1px solid var(--border);
        }

        .faq-question {
            padding: 14px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            color: var(--text-primary);
        }

        .faq-arrow {
            color: var(--text-secondary);
            transition: transform 0.3s ease;
            font-size: 12px;
        }

        .faq-item.open .faq-arrow {
            transform: rotate(180deg);
        }

        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .faq-item.open .faq-answer {
            max-height: 300px;
        }

        .faq-answer-content {
            padding: 0 16px 14px;
            font-size: 13px;
            line-height: 1.6;
            color: var(--text-secondary);
        }

        /* Location Card */
        .location-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 16px;
            border: 1px solid var(--border);
            box-shadow: 0 2px 8px var(--shadow);
        }

        .location-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 8px;
        }

        .location-address {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 12px;
        }

        .location-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 12px;
        }

        .location-info {
            background: var(--bg-primary);
            border-radius: 10px;
            padding: 10px;
            text-align: center;
        }

        .location-info-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }

        .location-info-text {
            font-size: 11px;
            color: var(--text-secondary);
        }

        .map-btn {
            display: block;
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            text-align: center;
            text-decoration: none;
            transition: transform 0.2s ease;
        }

        .map-btn:active {
            transform: scale(0.98);
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-top: 1px solid var(--border);
            padding: 8px 0 calc(8px + env(safe-area-inset-bottom));
            z-index: 1000;
        }

        .nav-container {
            max-width: 480px;
            margin: 0 auto;
            display: flex;
            justify-content: space-around;
        }

        .nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 8px 4px;
            cursor: pointer;
            border: none;
            background: none;
            color: var(--text-secondary);
            transition: color 0.2s ease;
        }

        .nav-item:active {
            transform: scale(0.95);
        }

        .nav-item.active {
            color: var(--primary);
        }

        [data-theme="dark"] .nav-item.active {
            color: var(--accent);
        }

        .nav-icon {
            font-size: 22px;
        }

        .nav-label {
            font-size: 10px;
            font-weight: 600;
        }

        /* Weather Card */
        .weather-card {
            background: linear-gradient(135deg, #0ea5e9, #38bdf8);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        [data-theme="dark"] .weather-card {
            background: linear-gradient(135deg, #0369a1, #0284c7);
        }

        .weather-main {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .weather-icon {
            font-size: 40px;
        }

        .weather-temp {
            font-size: 32px;
            font-weight: 700;
        }

        .weather-desc {
            font-size: 13px;
            opacity: 0.9;
        }

        .weather-tip {
            text-align: right;
            font-size: 12px;
        }

        .weather-tip p {
            opacity: 0.9;
        }

        /* Reset Button */
        .reset-btn {
            width: 100%;
            padding: 10px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-secondary);
            font-size: 13px;
            cursor: pointer;
            margin-top: 12px;
            transition: all 0.2s ease;
        }

        .reset-btn:active {
            transform: scale(0.98);
        }

        @media (min-width: 481px) {
            .app-container {
                box-shadow: 0 0 40px rgba(0, 0, 0, 0.1);
            }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .pulse {
            animation: pulse 2s ease-in-out infinite;
        }

        /* Install Banner */
        .install-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, var(--accent), #b8941f);
            color: #1e3a5f;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            z-index: 2000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transform: translateY(-100%);
            transition: transform 0.3s ease;
        }

        .install-banner.show {
            transform: translateY(0);
        }

        .install-banner-content {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
        }

        .install-banner-icon {
            font-size: 24px;
        }

        .install-banner-text {
            font-size: 13px;
            font-weight: 600;
        }

        .install-banner-text small {
            display: block;
            font-weight: 400;
            font-size: 11px;
            opacity: 0.8;
        }

        .install-banner-btn {
            background: #1e3a5f;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
        }

        .install-banner-close {
            background: none;
            border: none;
            color: #1e3a5f;
            font-size: 20px;
            cursor: pointer;
            padding: 4px;
            opacity: 0.7;
        }

        .install-banner.show + .app-container .header {
            padding-top: calc(max(env(safe-area-inset-top), 16px) + 60px);
        }

        /* Offline indicator */
        .offline-indicator {
            position: fixed;
            bottom: calc(80px + env(safe-area-inset-bottom) + 10px);
            left: 50%;
            transform: translateX(-50%);
            background: var(--danger);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            z-index: 1500;
            display: none;
        }

        .offline-indicator.show {
            display: block;
        }
    </style>
</head>
<body class="mode-en" data-theme="light">
    <!-- Install Banner -->
    <div class="install-banner" id="installBanner">
        <div class="install-banner-content">
            <span class="install-banner-icon">ğŸ“²</span>
            <div class="install-banner-text">
                <span class="lang-zh">æ·»åŠ åˆ°ä¸»å±å¹•</span>
                <span class="lang-en">Add to Home Screen</span>
                <small>
                    <span class="lang-zh">è·å¾—æœ€ä½³ä½“éªŒï¼Œå¯ç¦»çº¿ä½¿ç”¨</span>
                    <span class="lang-en">Best experience, works offline</span>
                </small>
            </div>
        </div>
        <button class="install-banner-btn" id="installBtn">
            <span class="lang-zh">å®‰è£…</span>
            <span class="lang-en">Install</span>
        </button>
        <button class="install-banner-close" id="installClose">Ã—</button>
    </div>

    <!-- Offline Indicator -->
    <div class="offline-indicator" id="offlineIndicator">
        <span class="lang-zh">ğŸ“´ ç¦»çº¿æ¨¡å¼</span>
        <span class="lang-en">ğŸ“´ Offline Mode</span>
    </div>

    <div class="app-container">
        <!-- Header -->
        <div class="header">
            <div class="header-controls">
                <button class="control-btn" onclick="toggleTheme()">
                    <span class="lang-zh">ğŸŒ™ æ·±è‰²</span>
                    <span class="lang-en">ğŸŒ™ Dark</span>
                </button>
                <button class="control-btn" onclick="toggleLanguage()">
                    <span class="lang-zh">ğŸŒ EN</span>
                    <span class="lang-en">ğŸŒ ä¸­æ–‡</span>
                </button>
            </div>
            <h1>
                <span class="lang-zh">ğŸš¢ å¢¨å°”æœ¬åˆ†éƒ¨å¹´ç»ˆåº†å…¸</span>
                <span class="lang-en">ğŸš¢ Melbourne Branch EoY</span>
            </h1>
            <div class="subtitle">
                <span class="lang-zh">ğŸ“… 2025å¹´12æœˆ18æ—¥ å‘¨å›› â€¢ Casinoä¸»é¢˜</span>
                <span class="lang-en">ğŸ“… Thu, 18 Dec 2025 â€¢ Casino Theme</span>
            </div>
        </div>

        <!-- Content -->
        <div class="content">
            <!-- Tab 1: Home -->
            <div class="tab-content active" data-tab="home">
                <!-- Countdown -->
                <div class="countdown-container">
                    <div class="countdown-label">
                        <span class="lang-zh">å‡ºå‘å€’è®¡æ—¶</span>
                        <span class="lang-en">Departure Countdown</span>
                    </div>
                    <div class="countdown-grid">
                        <div class="countdown-item">
                            <div class="countdown-number" id="days">00</div>
                            <div class="countdown-unit">
                                <span class="lang-zh">å¤©</span>
                                <span class="lang-en">Days</span>
                            </div>
                        </div>
                        <div class="countdown-item">
                            <div class="countdown-number" id="hours">00</div>
                            <div class="countdown-unit">
                                <span class="lang-zh">æ—¶</span>
                                <span class="lang-en">Hrs</span>
                            </div>
                        </div>
                        <div class="countdown-item">
                            <div class="countdown-number" id="minutes">00</div>
                            <div class="countdown-unit">
                                <span class="lang-zh">åˆ†</span>
                                <span class="lang-en">Min</span>
                            </div>
                        </div>
                        <div class="countdown-item">
                            <div class="countdown-number" id="seconds">00</div>
                            <div class="countdown-unit">
                                <span class="lang-zh">ç§’</span>
                                <span class="lang-en">Sec</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Alert -->
                <div class="alert-box danger">
                    <div style="display: flex; align-items: flex-start; gap: 10px;">
                        <span style="font-size: 20px;">âš ï¸</span>
                        <div>
                            <strong style="color: var(--danger);">
                                <span class="lang-zh">é‡è¦æé†’ï¼</span>
                                <span class="lang-en">Important Reminder!</span>
                            </strong>
                            <p style="font-size: 13px; margin-top: 4px; color: var(--text-secondary);">
                                <span class="lang-zh">è¯·äº<strong>ä¸‹åˆ4:30åˆ°è¾¾ç™»èˆ¹</strong>ï¼Œèˆ¹å°†äº<strong>ä¸‹åˆ5:00å‡†æ—¶å‡ºå‘</strong>â€”â€”è¿Ÿåˆ°å°†é”™è¿‡æ¸¸èˆ¹ï¼</span>
                                <span class="lang-en">Please arrive at <strong>4:30 PM for boarding</strong>. Boat departs <strong>STRICTLY at 5:00 PM</strong> - if you're late, you'll miss the boat!</span>
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Weather -->
                <div class="weather-card">
                    <div class="weather-main">
                        <span class="weather-icon">â˜€ï¸</span>
                        <div>
                            <div class="weather-temp">30Â°C</div>
                            <div class="weather-desc">
                                <span class="lang-zh">ç‚çƒ­ â€¢ å¾®é£</span>
                                <span class="lang-en">Hot â€¢ Low winds</span>
                            </div>
                        </div>
                    </div>
                    <div class="weather-tip">
                        <p>ğŸ’¡ <span class="lang-zh">ç©¿ç€æ¸…å‡‰</span><span class="lang-en">Dress light</span></p>
                        <p><span class="lang-zh">å¸¦å¤–å¥—å¤‡æ™šé—´</span><span class="lang-en">Jacket for evening</span></p>
                    </div>
                </div>

                <!-- Timeline -->
                <div class="section-title">
                    <span class="lang-zh">â±ï¸ æ´»åŠ¨æ—¶é—´è¡¨</span>
                    <span class="lang-en">â±ï¸ Event Timeline</span>
                </div>
                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-dot" style="background: #0ea5e9;">ğŸ«</div>
                        <div class="timeline-card">
                            <div class="timeline-time">4:30 PM</div>
                            <div class="timeline-desc">
                                <span class="lang-zh">å¼€å§‹ç™»èˆ¹</span>
                                <span class="lang-en">Boarding Opens</span>
                            </div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot pulse" style="background: #ef4444;">âš“</div>
                        <div class="timeline-card" style="border-color: var(--danger);">
                            <div class="timeline-time" style="color: var(--danger);">5:00 PM âš ï¸</div>
                            <div class="timeline-desc" style="font-weight: 600;">
                                <span class="lang-zh">å‡†æ—¶å‡ºå‘ - èˆ¹ä¸ä¼šç­‰äººï¼</span>
                                <span class="lang-en">STRICT DEPARTURE - Will NOT wait!</span>
                            </div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot" style="background: #f97316;">ğŸš¢</div>
                        <div class="timeline-card">
                            <div class="timeline-time">7:00 PM</div>
                            <div class="timeline-desc">
                                <span class="lang-zh">æå‰ä¸‹èˆ¹ï¼ˆå¯é€‰ï¼‰</span>
                                <span class="lang-en">Early Drop-off (Optional)</span>
                            </div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot" style="background: #22c55e;">ğŸ </div>
                        <div class="timeline-card">
                            <div class="timeline-time">8:30 PM</div>
                            <div class="timeline-desc">
                                <span class="lang-zh">è¿”å›Docklandsç å¤´</span>
                                <span class="lang-en">Return to Docklands</span>
                            </div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot" style="background: #a855f7;">ğŸ‰</div>
                        <div class="timeline-card">
                            <div class="timeline-time">9:00 PM</div>
                            <div class="timeline-desc">
                                <span class="lang-zh">æ´¾å¯¹ç»“æŸ</span>
                                <span class="lang-en">Party Ends</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 2: Location -->
            <div class="tab-content" data-tab="location">
                <div class="section-title">
                    <span class="lang-zh">ğŸ“ æ´»åŠ¨åœ°ç‚¹</span>
                    <span class="lang-en">ğŸ“ Location</span>
                </div>
                <div class="location-card">
                    <div class="location-title">Lady Cutler Melbourne Showboat</div>
                    <div class="location-address">Pier VH08, 131 Harbour Esplanade, Docklands VIC 3008</div>
                    
                    <div style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: var(--text-secondary); margin-bottom: 12px;">
                        <span>ğŸ„</span>
                        <span>
                            <span class="lang-zh">åœ°æ ‡ï¼šé è¿‘"æ ‘ä¸Šçš„ç‰›"é›•å¡‘ï¼ŒMarvelä½“è‚²åœºå¯¹é¢</span>
                            <span class="lang-en">Landmark: Near "Cow Up a Tree" sculpture, opposite Marvel Stadium</span>
                        </span>
                    </div>

                    <div class="location-grid">
                        <div class="location-info">
                            <div class="location-info-icon">ğŸ…¿ï¸</div>
                            <div class="location-info-text">
                                <span class="lang-zh">Marvelä½“è‚²åœºåœè½¦åœºï¼ˆå»ºè®®é¢„è®¢ï¼‰</span>
                                <span class="lang-en">Marvel Stadium Parking (Pre-book!)</span>
                            </div>
                        </div>
                        <div class="location-info">
                            <div class="location-info-icon">ğŸšƒ</div>
                            <div class="location-info-text">
                                <span class="lang-zh">ç”µè½¦70/75 â†’ D3ç«™</span>
                                <span class="lang-en">Tram 70/75 â†’ Stop D3</span>
                            </div>
                        </div>
                    </div>

                    <a href="https://www.google.com/maps/search/?api=1&query=131+Harbour+Esplanade+Docklands+Melbourne" target="_blank" class="map-btn">
                        <span class="lang-zh">ğŸ—ºï¸ åœ¨è°·æ­Œåœ°å›¾ä¸­æ‰“å¼€</span>
                        <span class="lang-en">ğŸ—ºï¸ Open in Google Maps</span>
                    </a>
                </div>

                <!-- Highlights -->
                <div class="section-title" style="margin-top: 24px;">
                    <span class="lang-zh">âœ¨ ç²¾å½©äº®ç‚¹</span>
                    <span class="lang-en">âœ¨ Don't Miss!</span>
                </div>

                <div class="highlight-card">
                    <div class="highlight-icon" style="background: linear-gradient(135deg, #a855f7, #ec4899);">ğŸ¸</div>
                    <div class="highlight-info">
                        <h3><span class="lang-zh">æ— é™ç•…é¥®</span><span class="lang-en">Open Bar</span></h3>
                        <p><span class="lang-zh">å•¤é…’ã€è‘¡è„é…’ã€çƒˆé…’å’Œè½¯é¥®å…¨åŒ…ï¼</span><span class="lang-en">Beer, Wine, Spirits & Soft drinks included!</span></p>
                    </div>
                </div>

                <div class="highlight-card">
                    <div class="highlight-icon" style="background: linear-gradient(135deg, #22c55e, #14b8a6);">ğŸ°</div>
                    <div class="highlight-info">
                        <h3><span class="lang-zh">æ…ˆå–„èµŒåœº</span><span class="lang-en">Charity Casino</span></h3>
                        <p><span class="lang-zh">21ç‚¹å’Œè½®ç›˜ - $10æ¢ç­¹ç ï¼ˆåˆ·å¡/ç°é‡‘ï¼‰</span><span class="lang-en">Blackjack & Roulette - $10 for chips</span></p>
                    </div>
                </div>

                <div class="highlight-card">
                    <div class="highlight-icon" style="background: linear-gradient(135deg, #f97316, #ef4444);">ğŸŒ…</div>
                    <div class="highlight-info">
                        <h3><span class="lang-zh">St Kildaæ—¥è½</span><span class="lang-en">St Kilda Sunset</span></h3>
                        <p><span class="lang-zh">è§†å¤©æ°”æƒ…å†µ - ç¾æ™¯æ— é™ï¼</span><span class="lang-en">Weather permitting - stunning views!</span></p>
                    </div>
                </div>

                <div class="highlight-card">
                    <div class="highlight-icon" style="background: linear-gradient(135deg, #3b82f6, #8b5cf6);">ğŸ¸</div>
                    <div class="highlight-info">
                        <h3><span class="lang-zh">ç°åœºå¨±ä¹</span><span class="lang-en">Live Entertainment</span></h3>
                        <p><span class="lang-zh">ç°åœºä¹é˜Ÿå’ŒDJæ•´æ™šï¼</span><span class="lang-en">Live Band & DJ all night!</span></p>
                    </div>
                </div>
            </div>

            <!-- Tab 3: Checklist -->
            <div class="tab-content" data-tab="checklist">
                <div class="section-title">
                    <span class="lang-zh">âœ… ç‰©å“æ¸…å•</span>
                    <span class="lang-en">âœ… Packing Checklist</span>
                </div>
                <div id="checklist"></div>
                <button class="reset-btn" onclick="resetChecklist()">
                    <span class="lang-zh">ğŸ”„ é‡ç½®æ¸…å•</span>
                    <span class="lang-en">ğŸ”„ Reset Checklist</span>
                </button>
            </div>

            <!-- Tab 4: FAQ -->
            <div class="tab-content" data-tab="faq">
                <div class="section-title">
                    <span class="lang-zh">â“ å¸¸è§é—®é¢˜</span>
                    <span class="lang-en">â“ FAQ</span>
                </div>
                <div id="faq"></div>
            </div>

            <!-- Tab 5: Safety -->
            <div class="tab-content" data-tab="safety">
                <div class="section-title">
                    <span class="lang-zh">ğŸ›¡ï¸ å®‰å…¨é¡»çŸ¥</span>
                    <span class="lang-en">ğŸ›¡ï¸ Safety Reminders</span>
                </div>

                <div class="card">
                    <div class="card-title">
                        <span>ğŸ’¼</span>
                        <span class="lang-zh">å·¥ä½œæ´»åŠ¨</span>
                        <span class="lang-en">Work Function</span>
                    </div>
                    <div class="card-content">
                        <span class="lang-zh">è¿™æ˜¯å…¬å¸æ´»åŠ¨ï¼Œæ‰€æœ‰å…¬å¸æ”¿ç­–ä»ç„¶æœ‰æ•ˆï¼ŒåŒ…æ‹¬è¡Œä¸ºå‡†åˆ™ã€é…’ç²¾ä¸è¯ç‰©æ”¿ç­–åŠåéªšæ‰°æ”¿ç­–ã€‚è¯·ä¿æŒå°Šé‡å’Œé€‚å½“çš„è¡Œä¸ºã€‚</span>
                        <span class="lang-en">This is a work function. Company policies remain in effect, including Code of Business Conduct, Drugs & Alcohol Policy, and Anti-Harassment policies. Please maintain respectful and appropriate behaviour.</span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-title">
                        <span>ğŸº</span>
                        <span class="lang-zh">è´Ÿè´£ä»»é¥®é…’</span>
                        <span class="lang-en">Responsible Drinking</span>
                    </div>
                    <div class="card-content">
                        <span class="lang-zh">è¯·é€‚åº¦é¥®é…’ã€‚æ³¨æ„é¥®é£Ÿï¼Œå¤šå–éé…’ç²¾é¥®æ–™ä¿æŒæ°´åˆ†ã€‚æˆ‘ä»¬å¸Œæœ›æ¯ä¸ªäººéƒ½èƒ½å®‰å…¨åœ°äº«å—æ´»åŠ¨ã€‚</span>
                        <span class="lang-en">Please drink responsibly. Be mindful of your consumption, eat food, and stay hydrated with non-alcoholic options. We want everyone to have fun safely.</span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-title">
                        <span>ğŸš•</span>
                        <span class="lang-zh">å®‰å…¨å›å®¶</span>
                        <span class="lang-en">Safe Travel Home</span>
                    </div>
                    <div class="card-content">
                        <span class="lang-zh"><strong>è¯·æå‰è§„åˆ’å›å®¶è·¯çº¿ã€‚åˆ‡å‹¿é…’åé©¾è½¦ï¼</strong>è¯·ä½¿ç”¨å…¬å…±äº¤é€šã€å‡ºç§Ÿè½¦ã€ç½‘çº¦è½¦æˆ–æŒ‡å®šå¸æœºã€‚æ‚¨çš„å®‰å…¨è‡³å…³é‡è¦ã€‚</span>
                        <span class="lang-en"><strong>Plan your journey home in advance. Do NOT drink and drive!</strong> Use public transport, taxis, ride-sharing, or designated drivers. Your safety is crucial.</span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-title">
                        <span>ğŸš¨</span>
                        <span class="lang-zh">ç´§æ€¥æƒ…å†µ</span>
                        <span class="lang-en">Emergency Response</span>
                    </div>
                    <div class="card-content">
                        <span class="lang-zh">å¦‚é‡ç´§æ€¥æƒ…å†µï¼ˆå¦‚ç«ç¾ã€åŒ»ç–—äº‹æ•…ï¼‰ï¼Œè¯·ä¿æŒå†·é™ï¼Œå¬ä»èˆ¹å‘˜å’Œå…¬å¸è´Ÿè´£äººæŒ‡ç¤ºã€‚åˆ°è¾¾åè¯·ç•™æ„ç»¿è‰²ç´§æ€¥å‡ºå£æ ‡å¿—ã€‚å¦‚éœ€åŒ»ç–—å¸®åŠ©ï¼Œè¯·ç«‹å³å‘ŠçŸ¥å·¥ä½œäººå‘˜ã€‚</span>
                        <span class="lang-en">In an emergency (fire, medical incident), remain calm and follow instructions from boat crew & company hosts. Familiarise yourself with emergency exits (green running man signs) when you arrive. For medical assistance, alert staff immediately.</span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-title">
                        <span>ğŸ‘¥</span>
                        <span class="lang-zh">äº’ç›¸å…³ç…§</span>
                        <span class="lang-en">Look Out for Each Other</span>
                    </div>
                    <div class="card-content">
                        <span class="lang-zh">è¯·å…³æ³¨æ‚¨çš„åŒäº‹å’Œæœ‹å‹ã€‚å¦‚æœå‘ç°æœ‰äººèº«ä½“ä¸é€‚æˆ–éœ€è¦å¸®åŠ©ï¼Œè¯·æä¾›æ”¯æŒæˆ–å‘ŠçŸ¥å·¥ä½œäººå‘˜ã€‚æ‚¨çš„ä¸»åŠ¨å…³å¿ƒéå¸¸é‡è¦ï¼</span>
                        <span class="lang-en">Look out for your colleagues and friends. If you notice someone seems unwell or needs assistance, offer support or discreetly alert staff. Your proactive care makes a big difference!</span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-title">
                        <span>ğŸ“¢</span>
                        <span class="lang-zh">æŠ¥å‘Šé—®é¢˜</span>
                        <span class="lang-en">Speak Up & Report</span>
                    </div>
                    <div class="card-content">
                        <span class="lang-zh">å¦‚æœ‰ä»»ä½•å®‰å…¨é—®é¢˜æˆ–éœ€è¦å¸®åŠ©ï¼Œè¯·éšæ—¶è”ç³»å…¬å¸è´Ÿè´£äººæˆ–åœºåœ°å·¥ä½œäººå‘˜ã€‚ä»»ä½•äº‹æ•…æˆ–ä¼¤å®³ï¼Œæ— è®ºå¤šå°ï¼Œè¯·é€šè¿‡Cisco IntelexæŠ¥å‘Šã€‚</span>
                        <span class="lang-en">If you notice any safety concerns or need assistance, speak with company hosts or venue staff. For any incidents or injuries, no matter how minor, please report via Cisco Intelex.</span>
                    </div>
                </div>

                <div class="alert-box" style="margin-top: 16px;">
                    <div style="display: flex; align-items: flex-start; gap: 10px;">
                        <span style="font-size: 20px;">ğŸ‰</span>
                        <div>
                            <strong style="color: var(--warning);">
                                <span class="lang-zh">ç¥æ‚¨ç©å¾—å¼€å¿ƒï¼</span>
                                <span class="lang-en">Have a Great Time!</span>
                            </strong>
                            <p style="font-size: 13px; margin-top: 4px; color: var(--text-secondary);">
                                <span class="lang-zh">æœŸå¾…ä¸å¤§å®¶ä¸€èµ·åº†ç¥ç²¾å½©çš„ä¸€å¹´ï¼ä»Šå¤©å¤©æ°”éå¸¸é€‚åˆåœ¨æ°´ä¸Šæ´»åŠ¨ï¼</span>
                                <span class="lang-en">Looking forward to celebrating a fantastic year with you! It's turned out to be a cracking day to be out on the water!</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="nav-container">
            <button class="nav-item active" data-tab="home">
                <span class="nav-icon">ğŸ </span>
                <span class="nav-label">
                    <span class="lang-zh">é¦–é¡µ</span>
                    <span class="lang-en">Home</span>
                </span>
            </button>
            <button class="nav-item" data-tab="location">
                <span class="nav-icon">ğŸ“</span>
                <span class="nav-label">
                    <span class="lang-zh">åœ°ç‚¹</span>
                    <span class="lang-en">Location</span>
                </span>
            </button>
            <button class="nav-item" data-tab="checklist">
                <span class="nav-icon">âœ…</span>
                <span class="nav-label">
                    <span class="lang-zh">æ¸…å•</span>
                    <span class="lang-en">Checklist</span>
                </span>
            </button>
            <button class="nav-item" data-tab="faq">
                <span class="nav-icon">â“</span>
                <span class="nav-label">
                    <span class="lang-zh">é—®ç­”</span>
                    <span class="lang-en">FAQ</span>
                </span>
            </button>
            <button class="nav-item" data-tab="safety">
                <span class="nav-icon">ğŸ›¡ï¸</span>
                <span class="nav-label">
                    <span class="lang-zh">å®‰å…¨</span>
                    <span class="lang-en">Safety</span>
                </span>
            </button>
        </div>
    </nav>

    <script>
        // ===== Data =====
        const checklistItems = [
            { id: 'jacket', en: 'Windbreaker/Blazer (for evening temp drop)', zh: 'é˜²é£è¡£/å¤–å¥—ï¼ˆå¤œé—´é™æ¸©ï¼‰', icon: 'ğŸ§¥' },
            { id: 'sunglasses', en: 'Sunglasses (sun & wind protection)', zh: 'å¤ªé˜³é•œï¼ˆé®é˜³æŒ¡é£ï¼‰', icon: 'ğŸ•¶ï¸' },
            { id: 'powerbank', en: 'Power Bank (phone battery)', zh: 'å……ç”µå®ï¼ˆæ‰‹æœºç”µé‡ï¼‰', icon: 'ğŸ”‹' },
            { id: 'payment', en: 'Payment Method (card/cash for $10 casino)', zh: 'æ”¯ä»˜æ–¹å¼ï¼ˆåˆ·å¡/ç°é‡‘æ¢$10ç­¹ç ï¼‰', icon: 'ğŸ’³' },
            { id: 'parking', en: 'Parking Ticket Screenshot (if driving)', zh: 'åœè½¦ç¥¨æˆªå›¾ï¼ˆå¦‚å¼€è½¦ï¼‰', icon: 'ğŸ«' }
        ];

        const faqItems = [
            {
                q_en: 'Will the event be catered?',
                q_zh: 'æ´»åŠ¨æä¾›é¤é¥®å—ï¼Ÿ',
                a_en: 'Yes, there will be plenty of food and drinks throughout the whole event. There is an <strong>open bar</strong> with beer, wine, spirits & soft drinks available. Any dietary requirements listed in your registration form will be met.',
                a_zh: 'æ˜¯çš„ï¼Œæ•´ä¸ªæ´»åŠ¨æœŸé—´éƒ½æœ‰ä¸°å¯Œçš„é£Ÿç‰©å’Œé¥®æ–™ã€‚è®¾æœ‰<strong>æ— é™ç•…é¥®å§å°</strong>ï¼Œæä¾›å•¤é…’ã€è‘¡è„é…’ã€çƒˆé…’å’Œè½¯é¥®ã€‚æ‚¨åœ¨æ³¨å†Œè¡¨ä¸­å¡«å†™çš„ç‰¹æ®Šé¥®é£Ÿéœ€æ±‚å°†ä¼šå¾—åˆ°æ»¡è¶³ã€‚'
            },
            {
                q_en: 'Where do we board the boat?',
                q_zh: 'åœ¨å“ªé‡Œç™»èˆ¹ï¼Ÿ',
                a_en: 'Address is <strong>Pier VH08, 131 Harbour Esplanade, Docklands</strong> - directly across from Marvel Stadium. Take Tram Route 70 or 75 from Flinders St (near office) and get off at Stadium Precinct, Stop D3.',
                a_zh: 'åœ°å€æ˜¯<strong>Pier VH08, 131 Harbour Esplanade, Docklands</strong>â€”â€”å°±åœ¨Marvelä½“è‚²åœºå¯¹é¢ã€‚ä»Flinders Stï¼ˆåŠå…¬å®¤é™„è¿‘ï¼‰ä¹˜å70æˆ–75è·¯ç”µè½¦ï¼Œåœ¨Stadium Precinct D3ç«™ä¸‹è½¦å³åˆ°ã€‚'
            },
            {
                q_en: 'Where is the boat going?',
                q_zh: 'æ¸¸èˆ¹å»å“ªé‡Œï¼Ÿ',
                a_en: 'The boat will cruise down the Yarra, under the Bolte and Westgate bridges, then around through Williamstown. If the weather is nice and calm, we will proceed to St Kilda for a sunset view of the city.',
                a_zh: 'æ¸¸èˆ¹å°†æ²¿Yarraæ²³å·¡æ¸¸ï¼Œç©¿è¿‡Bolteå¤§æ¡¥å’ŒWestgateå¤§æ¡¥ï¼Œç„¶åç¯ç»•Williamstownã€‚å¦‚æœå¤©æ°”æ™´å¥½å¹³é™ï¼Œæˆ‘ä»¬å°†å‰å¾€St Kildaæ¬£èµåŸå¸‚æ—¥è½ç¾æ™¯ã€‚'
            },
            {
                q_en: 'What if the weather is bad?',
                q_zh: 'å¦‚æœå¤©æ°”ä¸å¥½æ€ä¹ˆåŠï¼Ÿ',
                a_en: 'It looks like we\'ve been blessed with a 30Â°C day and low winds so this shouldn\'t be an issue. However, if the water is not calm we will not be leaving the river area.',
                a_zh: 'çœ‹èµ·æ¥æˆ‘ä»¬å¾ˆå¹¸è¿ï¼Œå½“å¤©é¢„æŠ¥30Â°Cä¸”é£åŠ›è¾ƒå°ï¼Œåº”è¯¥ä¸ä¼šæœ‰é—®é¢˜ã€‚ä½†å¦‚æœæ°´é¢ä¸å¹³é™ï¼Œæˆ‘ä»¬å°†ä¸ä¼šç¦»å¼€æ²³æµåŒºåŸŸã€‚'
            },
            {
                q_en: 'What are the timings?',
                q_zh: 'æ´»åŠ¨æ—¶é—´å®‰æ’æ˜¯ä»€ä¹ˆï¼Ÿ',
                a_en: 'Boarding from <strong>4:30 PM</strong>, boat departs at <strong>5:00 PM sharp</strong> (if you\'re late the boat won\'t wait!). We return to Docklands at <strong>7:00 PM for early drop-off</strong>, then head back out until <strong>8:30 PM</strong>. Party ends at <strong>9:00 PM</strong>.',
                a_zh: '<strong>4:30 PM</strong>å¼€å§‹ç™»èˆ¹ï¼Œ<strong>5:00 PMå‡†æ—¶å‡ºå‘</strong>ï¼ˆè¿Ÿåˆ°ä¸ç­‰äººï¼ï¼‰ã€‚<strong>7:00 PMè¿”å›Docklands</strong>ä¾›éœ€è¦æå‰ç¦»å¼€çš„äººä¸‹èˆ¹ï¼Œç„¶åç»§ç»­èˆªè¡Œè‡³<strong>8:30 PM</strong>è¿”å›ã€‚æ´¾å¯¹äº<strong>9:00 PM</strong>ç»“æŸã€‚'
            },
            {
                q_en: 'What entertainment is there?',
                q_zh: 'æœ‰ä»€ä¹ˆå¨±ä¹æ´»åŠ¨ï¼Ÿ',
                a_en: 'We have a play casino setup with blackjack, roulette and poker. Chips can be purchased for $10 which will be directly donated to charity. We also have both a <strong>DJ and a live band</strong> to keep you entertained!',
                a_zh: 'æˆ‘ä»¬è®¾æœ‰å¨±ä¹èµŒåœºï¼Œæä¾›21ç‚¹ã€è½®ç›˜å’Œæ‰‘å…‹ã€‚ç­¹ç $10ä¸€ä»½ï¼Œå°†å…¨éƒ¨æç»™æ…ˆå–„æœºæ„ã€‚æ­¤å¤–è¿˜æœ‰<strong>DJå’Œç°åœºä¹é˜Ÿ</strong>ä¸ºæ‚¨åŠ©å…´ï¼'
            },
            {
                q_en: 'What is the boat like?',
                q_zh: 'æ¸¸èˆ¹æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ',
                a_en: 'The boat is called the <strong>Lady Cutler</strong>. It holds over 300 people across multiple decks with both indoor and outdoor areas to explore.',
                a_zh: 'æ¸¸èˆ¹åä¸º<strong>Lady Cutler</strong>ï¼Œå¯å®¹çº³300å¤šäººï¼Œæ‹¥æœ‰å¤šå±‚ç”²æ¿ï¼Œè®¾æœ‰å®¤å†…å’Œå®¤å¤–åŒºåŸŸä¾›æ‚¨æ¢ç´¢ã€‚'
            },
            {
                q_en: 'Is there a dress code?',
                q_zh: 'æœ‰ç€è£…è¦æ±‚å—ï¼Ÿ',
                a_en: 'Not officially. It\'s a "Casino Royale" theme if you want to dress up, but it\'s optional. <strong>Important:</strong> The weather will be hot (30Â°C), so dress accordingly!',
                a_zh: 'æ²¡æœ‰ç¡¬æ€§è¦æ±‚ã€‚å¦‚æœæ‚¨æƒ³æ‰“æ‰®ä¸€ä¸‹ï¼Œä¸»é¢˜æ˜¯"Casino Royale"ï¼Œä½†è¿™æ˜¯å¯é€‰çš„ã€‚<strong>é‡è¦ï¼š</strong>å½“å¤©å¤©æ°”ç‚çƒ­ï¼ˆ30Â°Cï¼‰ï¼Œè¯·ç©¿ç€æ¸…å‡‰ï¼'
            }
        ];

        // ===== State =====
        let currentLang = localStorage.getItem('partyLang') || 'en';
        let currentTheme = localStorage.getItem('partyTheme') || 'light';

        // ===== Theme =====
        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.body.setAttribute('data-theme', currentTheme);
            localStorage.setItem('partyTheme', currentTheme);
            updateThemeButton();
        }

        function updateThemeButton() {
            const btns = document.querySelectorAll('.control-btn');
            const themeBtn = btns[0];
            if (currentTheme === 'dark') {
                themeBtn.innerHTML = '<span class="lang-zh">â˜€ï¸ æµ…è‰²</span><span class="lang-en">â˜€ï¸ Light</span>';
            } else {
                themeBtn.innerHTML = '<span class="lang-zh">ğŸŒ™ æ·±è‰²</span><span class="lang-en">ğŸŒ™ Dark</span>';
            }
        }

        // ===== Language =====
        function toggleLanguage() {
            currentLang = currentLang === 'zh' ? 'en' : 'zh';
            document.body.className = `mode-${currentLang}`;
            localStorage.setItem('partyLang', currentLang);
            loadChecklist();
            loadFAQ();
        }

        // ===== Tabs =====
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.querySelector(`.tab-content[data-tab="${tabName}"]`).classList.add('active');
            document.querySelector(`.nav-item[data-tab="${tabName}"]`).classList.add('active');
        }

        // ===== Countdown =====
        function updateCountdown() {
            const targetDate = new Date('2025-12-18T17:00:00+11:00');
            const now = new Date();
            const diff = targetDate - now;

            if (diff <= 0) {
                document.getElementById('days').textContent = '00';
                document.getElementById('hours').textContent = '00';
                document.getElementById('minutes').textContent = '00';
                document.getElementById('seconds').textContent = '00';
                return;
            }

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            document.getElementById('days').textContent = String(days).padStart(2, '0');
            document.getElementById('hours').textContent = String(hours).padStart(2, '0');
            document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
            document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
        }

        // ===== Checklist =====
        function loadChecklist() {
            const saved = JSON.parse(localStorage.getItem('partyChecklist') || '{}');
            const container = document.getElementById('checklist');
            container.innerHTML = '';

            checklistItems.forEach(item => {
                const checked = saved[item.id] || false;
                const div = document.createElement('div');
                div.className = `checklist-item ${checked ? 'checked' : ''}`;
                div.innerHTML = `
                    <div class="checklist-checkbox">${checked ? 'âœ“' : ''}</div>
                    <span class="checklist-icon">${item.icon}</span>
                    <span class="checklist-text">${currentLang === 'zh' ? item.zh : item.en}</span>
                `;
                div.onclick = () => toggleChecklistItem(item.id);
                container.appendChild(div);
            });
        }

        function toggleChecklistItem(id) {
            const saved = JSON.parse(localStorage.getItem('partyChecklist') || '{}');
            saved[id] = !saved[id];
            localStorage.setItem('partyChecklist', JSON.stringify(saved));
            loadChecklist();
        }

        function resetChecklist() {
            localStorage.removeItem('partyChecklist');
            loadChecklist();
        }

        // ===== FAQ =====
        function loadFAQ() {
            const container = document.getElementById('faq');
            container.innerHTML = '';

            faqItems.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'faq-item';
                div.innerHTML = `
                    <div class="faq-question">
                        <span>${currentLang === 'zh' ? item.q_zh : item.q_en}</span>
                        <span class="faq-arrow">â–¼</span>
                    </div>
                    <div class="faq-answer">
                        <div class="faq-answer-content">${currentLang === 'zh' ? item.a_zh : item.a_en}</div>
                    </div>
                `;
                div.querySelector('.faq-question').onclick = () => {
                    div.classList.toggle('open');
                };
                container.appendChild(div);
            });
        }

        // ===== Init =====
        function init() {
            // Apply saved theme
            document.body.setAttribute('data-theme', currentTheme);
            document.body.className = `mode-${currentLang}`;
            updateThemeButton();

            // Setup tab navigation
            document.querySelectorAll('.nav-item').forEach(btn => {
                btn.onclick = () => switchTab(btn.dataset.tab);
            });

            // Start countdown
            updateCountdown();
            setInterval(updateCountdown, 1000);

            // Load dynamic content
            loadChecklist();
            loadFAQ();

            // Initialize PWA
            initPWA();
        }

        // ===== PWA Install & Offline =====
        let deferredPrompt = null;
        const installBanner = document.getElementById('installBanner');
        const installBtn = document.getElementById('installBtn');
        const installClose = document.getElementById('installClose');
        const offlineIndicator = document.getElementById('offlineIndicator');

        function initPWA() {
            // Register Service Worker
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('./sw.js')
                    .then(reg => console.log('Service Worker registered:', reg.scope))
                    .catch(err => console.log('Service Worker registration failed:', err));
            }

            // Check if already installed or dismissed
            const isInstalled = window.matchMedia('(display-mode: standalone)').matches || 
                               window.navigator.standalone === true;
            const isDismissed = localStorage.getItem('installBannerDismissed');

            // Show install banner for mobile users who haven't installed
            if (!isInstalled && !isDismissed && isMobileDevice()) {
                setTimeout(() => {
                    installBanner.classList.add('show');
                }, 2000);
            }

            // Listen for beforeinstallprompt (Android Chrome)
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                if (!localStorage.getItem('installBannerDismissed')) {
                    installBanner.classList.add('show');
                }
            });

            // Install button click
            installBtn.addEventListener('click', async () => {
                if (deferredPrompt) {
                    // Android - use native prompt
                    deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;
                    if (outcome === 'accepted') {
                        installBanner.classList.remove('show');
                    }
                    deferredPrompt = null;
                } else if (isIOS()) {
                    // iOS - show instructions
                    alert(currentLang === 'zh' 
                        ? 'è¯·ç‚¹å‡»æµè§ˆå™¨åº•éƒ¨çš„åˆ†äº«æŒ‰é’® â¬†ï¸ï¼Œç„¶åé€‰æ‹©"æ·»åŠ åˆ°ä¸»å±å¹•"'
                        : 'Tap the Share button â¬†ï¸ at the bottom of Safari, then select "Add to Home Screen"');
                } else {
                    // Desktop or other - show generic instructions
                    alert(currentLang === 'zh'
                        ? 'è¯·ä½¿ç”¨æµè§ˆå™¨èœå•ä¸­çš„"å®‰è£…åº”ç”¨"æˆ–"æ·»åŠ åˆ°ä¸»å±å¹•"é€‰é¡¹'
                        : 'Use your browser menu to "Install App" or "Add to Home Screen"');
                }
            });

            // Close button
            installClose.addEventListener('click', () => {
                installBanner.classList.remove('show');
                localStorage.setItem('installBannerDismissed', 'true');
            });

            // Listen for successful install
            window.addEventListener('appinstalled', () => {
                installBanner.classList.remove('show');
                deferredPrompt = null;
            });

            // Offline/Online status
            function updateOnlineStatus() {
                if (!navigator.onLine) {
                    offlineIndicator.classList.add('show');
                } else {
                    offlineIndicator.classList.remove('show');
                }
            }

            window.addEventListener('online', updateOnlineStatus);
            window.addEventListener('offline', updateOnlineStatus);
            updateOnlineStatus();
        }

        function isMobileDevice() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }

        function isIOS() {
            return /iPad|iPhone|iPod/.test(navigator.userAgent) || 
                   (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
        }

        init();
    </script>
</body>
</html>
